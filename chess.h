#define TILESIZE 30

#define LIGHT_BROWN 0xCB46
#define DARK_BROWN  0x79E3


typedef struct {
    uint8_t data[24][3]; 
} sprite;

typedef struct {
    rectangle r;
    uint16_t col;
} tile;

typedef struct {
    rectangle r;
    uint8_t thickness;
    uint16_t col;
    uint8_t x;
    uint8_t y;
    uint8_t active;
} selector;

typedef struct {
    rectangle r;
    uint8_t x;
    uint8_t y;
    uint8_t taken;
    uint8_t team;
    uint8_t type;
    uint8_t first;
    sprite *s;
} piece;

typedef struct {
    uint8_t possible_moves_x[32];
    uint8_t possible_moves_y[32];
    uint8_t num_possible_moves;
} move_set;

typedef struct {
    selector select;
    piece pieces[32];

    uint8_t turn;
    uint8_t selected_piece_index;
    uint8_t past_x;
    uint8_t past_y;

    uint8_t has_drawn;
    uint8_t board_past_x;
    uint8_t board_past_y;
    uint8_t select_active_last_draw;
    uint8_t en_passant_occured;
    uint8_t castling_occured;

    uint8_t can_en_passant;
    uint8_t en_passant_x;
    uint8_t en_passant_y;
} game_state;


sprite king = {{{0x00, 0x18, 0x00},
                {0x00, 0x18, 0x00},
                {0x00, 0x7E, 0x00},
                {0x00, 0x7E, 0x00},
                {0x00, 0x18, 0x00},
                {0x00, 0x18, 0x00},
                {0x00, 0x3C, 0x00},
                {0x00, 0x7E, 0x00},
                {0x00, 0xFF, 0x00},
                {0x01, 0xFF, 0x80},
                {0x00, 0xFF, 0x00},
                {0x00, 0x7E, 0x00},
                {0x00, 0x3C, 0x00},
                {0x00, 0x18, 0x00},
                {0x00, 0x3C, 0x00},
                {0x00, 0x3C, 0x00},
                {0x00, 0x7E, 0x00},
                {0x00, 0x7E, 0x00},
                {0x00, 0xFF, 0x00},
                {0x00, 0xFF, 0x00},
                {0x01, 0xFF, 0x80},
                {0x01, 0xFF, 0x80},
                {0x03, 0xFF, 0xC0},
                {0x03, 0xFF, 0xC0}}};

sprite queen = {{{0x01, 0x5A, 0x80},
                 {0x01, 0x5A, 0x80},
                 {0x01, 0xFF, 0x80},
                 {0x00, 0xFF, 0x00},
                 {0x00, 0x3C, 0x00},
                 {0x00, 0x7E, 0x00},
                 {0x00, 0xFF, 0x00},
                 {0x00, 0xFF, 0x00},
                 {0x00, 0xFF, 0x00},
                 {0x00, 0x7E, 0x00},
                 {0x00, 0x3C, 0x00},
                 {0x00, 0xFF, 0x00},
                 {0x01, 0xFF, 0x80},
                 {0x01, 0xFF, 0x80},
                 {0x00, 0x3C, 0x00},
                 {0x00, 0x3C, 0x00},
                 {0x00, 0x7E, 0x00},
                 {0x00, 0x7E, 0x00},
                 {0x00, 0xFF, 0x00},
                 {0x00, 0xFF, 0x00},
                 {0x01, 0xFF, 0x80},
                 {0x01, 0xFF, 0x80},
                 {0x03, 0xFF, 0xC0},
                 {0x03, 0xFF, 0xC0},}};

sprite bishop = {{{0x00, 0x00, 0x00},
                  {0x00, 0x00, 0x00},
                  {0x00, 0x00, 0x00},
                  {0x00, 0x00, 0x00},
                  {0x00, 0x18, 0x00},
                  {0x00, 0x3C, 0x00},
                  {0x00, 0x38, 0x00},
                  {0x00, 0x72, 0x00},
                  {0x00, 0x76, 0x00},
                  {0x00, 0x7E, 0x00},
                  {0x00, 0x3C, 0x00},
                  {0x00, 0x3C, 0x00},
                  {0x00, 0x18, 0x00},
                  {0x00, 0x7E, 0x00},
                  {0x00, 0xFF, 0x00},
                  {0x00, 0x18, 0x00},
                  {0x00, 0x3C, 0x00},
                  {0x00, 0x3C, 0x00},
                  {0x00, 0x7E, 0x00},
                  {0x00, 0x7E, 0x00},
                  {0x00, 0xFF, 0x00},
                  {0x00, 0xFF, 0x00},
                  {0x01, 0xFF, 0x80},
                  {0x01, 0xFF, 0x80}}};

sprite rook = {{{0x00, 0x00, 0x00},
                {0x00, 0x00, 0x00},
                {0x00, 0x00, 0x00},
                {0x00, 0x00, 0x00},
                {0x00, 0x00, 0x00},
                {0x00, 0x00, 0x00},
                {0x00, 0x00, 0x00},
                {0x00, 0x00, 0x00},
                {0x00, 0x00, 0x00},
                {0x00, 0x00, 0x00},
                {0x00, 0x99, 0x00},
                {0x00, 0x99, 0x00},
                {0x00, 0x99, 0x00},
                {0x00, 0xFF, 0x00},
                {0x00, 0x7E, 0x00},
                {0x00, 0x18, 0x00},
                {0x00, 0x3C, 0x00},
                {0x00, 0x3C, 0x00},
                {0x00, 0x3C, 0x00},
                {0x00, 0x7E, 0x00},
                {0x00, 0x7E, 0x00},
                {0x00, 0x7E, 0x00},
                {0x00, 0xFF, 0x00},
                {0x00, 0xFF, 0x00}}};

sprite knight = {{{0x00, 0x00, 0x00},
                  {0x00, 0x00, 0x00},
                  {0x00, 0x00, 0x00},
                  {0x00, 0x00, 0x00},
                  {0x00, 0x00, 0x00},
                  {0x00, 0x00, 0x00},
                  {0x00, 0x00, 0x00},
                  {0x00, 0x38, 0x00},
                  {0x00, 0x5C, 0x00},
                  {0x01, 0xFC, 0x00},
                  {0x03, 0xF8, 0x00},
                  {0x03, 0xFC, 0x00},
                  {0x01, 0x9E, 0x00},
                  {0x00, 0x1E, 0x00},
                  {0x00, 0x3E, 0x00},
                  {0x00, 0x3E, 0x00},
                  {0x00, 0x7E, 0x00},
                  {0x00, 0x7F, 0x00},
                  {0x00, 0x7F, 0x00},
                  {0x00, 0xFF, 0x00},
                  {0x00, 0xFF, 0x00},
                  {0x00, 0xFF, 0x00},
                  {0x01, 0xFF, 0x80},
                  {0x01, 0xFF, 0x80}}};

sprite pawn = {{{0x00, 0x00, 0x00},
                {0x00, 0x00, 0x00},
                {0x00, 0x00, 0x00},
                {0x00, 0x00, 0x00},
                {0x00, 0x00, 0x00},
                {0x00, 0x00, 0x00},
                {0x00, 0x00, 0x00},
                {0x00, 0x00, 0x00},
                {0x00, 0x00, 0x00},
                {0x00, 0x00, 0x00},
                {0x00, 0x18, 0x00},
                {0x00, 0x3C, 0x00},
                {0x00, 0x7E, 0x00},
                {0x00, 0x7E, 0x00},
                {0x00, 0x3C, 0x00},
                {0x00, 0x18, 0x00},
                {0x00, 0x3C, 0x00},
                {0x00, 0x18, 0x00},
                {0x00, 0x3C, 0x00},
                {0x00, 0x3C, 0x00},
                {0x00, 0x7E, 0x00},
                {0x00, 0x7E, 0x00},
                {0x00, 0xFF, 0x00},
                {0x00, 0xFF, 0x00}}};